import{ar as k,as as q,at as M,au as O,Q as P,N as u,aa as Q}from"./DKjhEE28.js";const p=new WeakMap;function b(i,c,y={}){const{mode:g="replace",route:f=k(),router:a=q(),transform:r}=y;let o=s=>s,m=s=>s;typeof r=="function"?o=r:r&&(r.get&&(o=r.get),r.set&&(m=r.set)),p.has(a)||p.set(a,new Map);const n=p.get(a);let t=f.params[i];M(()=>{t=void 0});let l;const w=O((s,h)=>(l=h,{get(){return s(),o(t!==void 0&&t!==""?t:u(c))},set(e){e=m(e),t!==e&&(t=e===u(c)||e===null?void 0:e,n.set(i,e===u(c)||e===null?void 0:e),h(),Q(()=>{if(n.size===0)return;const R=Object.fromEntries(n.entries());n.clear();const{params:d,query:x,hash:_}=f;a[u(g)]({params:{...d,...R},query:x,hash:_})}))}}));return P(()=>f.params[i],s=>{t!==o(s)&&(t=s,l())},{flush:"sync"}),w}export{b as u};
