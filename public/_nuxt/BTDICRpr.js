import{a4 as J,A as w,aN as ee,r as _,a8 as te,D as E,E as u,aO as C,o as x,G as h,d as b,w as v,C as D,S as P,aP as oe,O as ne,a5 as N,aQ as Y,aR as F,aa as H,aS as k,aT as I,aU as se,aV as ae,aW as R,aX as W,aY as re,f as j,aZ as ue,Q as X,a_ as ie,b as le,a$ as L,b0 as G,b1 as de,B as Q,b2 as ce,b3 as fe,Y as pe,b4 as U,b5 as me,e as ve,ag as ye,ah as ge,b6 as he}from"./DKjhEE28.js";import{u as K}from"./DxLhVKGq.js";const[B,be]=J("DialogRoot"),Le=w({inheritAttrs:!1,__name:"DialogRoot",props:{open:{type:Boolean,default:void 0},defaultOpen:{type:Boolean,default:!1},modal:{type:Boolean,default:!0}},emits:["update:open"],setup(t,{emit:o}){const e=t,a=ee(e,"open",o,{defaultValue:e.defaultOpen,passive:e.open===void 0}),f=_(),p=_(),{modal:c}=te(e);return be({open:a,modal:c,openModal:()=>{a.value=!0},onOpenChange:i=>{a.value=i},onOpenToggle:()=>{a.value=!a.value},contentId:"",titleId:"",descriptionId:"",triggerElement:f,contentElement:p}),(i,l)=>E(i.$slots,"default",{open:u(a)})}}),Ne=w({__name:"DialogTrigger",props:{asChild:{type:Boolean},as:{default:"button"}},setup(t){const o=t,e=B(),{forwardRef:s,currentElement:a}=C();return e.contentId||(e.contentId=K(void 0,"reka-dialog-content")),x(()=>{e.triggerElement.value=a.value}),(f,p)=>(b(),h(u(P),D(o,{ref:u(s),type:f.as==="button"?"button":void 0,"aria-haspopup":"dialog","aria-expanded":u(e).open.value||!1,"aria-controls":u(e).open.value?u(e).contentId:void 0,"data-state":u(e).open.value?"open":"closed",onClick:u(e).onOpenToggle}),{default:v(()=>[E(f.$slots,"default")]),_:3},16,["type","aria-expanded","aria-controls","data-state","onClick"]))}});function Ee(t){return t?"open":"closed"}const Oe=oe(()=>_([]));function we(){const t=Oe();return{add(o){const e=t.value[0];o!==e&&(e==null||e.pause()),t.value=V(t.value,o),t.value.unshift(o)},remove(o){var e;t.value=V(t.value,o),(e=t.value[0])==null||e.resume()}}}function V(t,o){const e=[...t],s=e.indexOf(o);return s!==-1&&e.splice(s,1),e}function Ce(t){return t.filter(o=>o.tagName!=="A")}const _e=w({__name:"FocusScope",props:{loop:{type:Boolean,default:!1},trapped:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["mountAutoFocus","unmountAutoFocus"],setup(t,{emit:o}){const e=t,s=o,{currentRef:a,currentElement:f}=C(),p=_(null),c=we(),i=ne({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}});N(r=>{if(!Y)return;const n=f.value;if(!e.trapped)return;function d(O){if(i.paused||!n)return;const A=O.target;n.contains(A)?p.value=A:F(p.value,{select:!0})}function m(O){if(i.paused||!n)return;const A=O.relatedTarget;A!==null&&(n.contains(A)||F(p.value,{select:!0}))}function y(O){n.contains(p.value)||F(n)}document.addEventListener("focusin",d),document.addEventListener("focusout",m);const g=new MutationObserver(y);n&&g.observe(n,{childList:!0,subtree:!0}),r(()=>{document.removeEventListener("focusin",d),document.removeEventListener("focusout",m),g.disconnect()})}),N(async r=>{const n=f.value;if(await H(),!n)return;c.add(i);const d=k();if(!n.contains(d)){const y=new CustomEvent(I,W);n.addEventListener(I,g=>s("mountAutoFocus",g)),n.dispatchEvent(y),y.defaultPrevented||(se(Ce(ae(n)),{select:!0}),k()===d&&F(n))}r(()=>{n.removeEventListener(I,O=>s("mountAutoFocus",O));const y=new CustomEvent(R,W),g=O=>{s("unmountAutoFocus",O)};n.addEventListener(R,g),n.dispatchEvent(y),setTimeout(()=>{y.defaultPrevented||F(d??document.body,{select:!0}),n.removeEventListener(R,g),c.remove(i)},0)})});function l(r){if(!e.loop&&!e.trapped||i.paused)return;const n=r.key==="Tab"&&!r.altKey&&!r.ctrlKey&&!r.metaKey,d=k();if(n&&d){const m=r.currentTarget,[y,g]=re(m);y&&g?!r.shiftKey&&d===g?(r.preventDefault(),e.loop&&F(y,{select:!0})):r.shiftKey&&d===y&&(r.preventDefault(),e.loop&&F(g,{select:!0})):d===m&&r.preventDefault()}}return(r,n)=>(b(),h(u(P),{ref_key:"currentRef",ref:a,tabindex:"-1","as-child":r.asChild,as:r.as,onKeydown:l},{default:v(()=>[E(r.$slots,"default")]),_:3},8,["as-child","as"]))}}),q=w({__name:"DialogContentImpl",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:o}){const e=t,s=o,a=B(),{forwardRef:f,currentElement:p}=C();return a.titleId||(a.titleId=K(void 0,"reka-dialog-title")),a.descriptionId||(a.descriptionId=K(void 0,"reka-dialog-description")),x(()=>{a.contentElement=p,k()!==document.body&&(a.triggerElement.value=k())}),(c,i)=>(b(),h(u(_e),{"as-child":"",loop:"",trapped:e.trapFocus,onMountAutoFocus:i[5]||(i[5]=l=>s("openAutoFocus",l)),onUnmountAutoFocus:i[6]||(i[6]=l=>s("closeAutoFocus",l))},{default:v(()=>[j(u(ue),D({id:u(a).contentId,ref:u(f),as:c.as,"as-child":c.asChild,"disable-outside-pointer-events":c.disableOutsidePointerEvents,role:"dialog","aria-describedby":u(a).descriptionId,"aria-labelledby":u(a).titleId,"data-state":u(Ee)(u(a).open.value)},c.$attrs,{onDismiss:i[0]||(i[0]=l=>u(a).onOpenChange(!1)),onEscapeKeyDown:i[1]||(i[1]=l=>s("escapeKeyDown",l)),onFocusOutside:i[2]||(i[2]=l=>s("focusOutside",l)),onInteractOutside:i[3]||(i[3]=l=>s("interactOutside",l)),onPointerDownOutside:i[4]||(i[4]=l=>s("pointerDownOutside",l))}),{default:v(()=>[E(c.$slots,"default")]),_:3},16,["id","as","as-child","disable-outside-pointer-events","aria-describedby","aria-labelledby","data-state"])]),_:3},8,["trapped"]))}});var De=function(t){if(typeof document>"u")return null;var o=Array.isArray(t)?t[0]:t;return o.ownerDocument.body},$=new WeakMap,S=new WeakMap,M={},T=0,z=function(t){return t&&(t.host||z(t.parentNode))},Be=function(t,o){return o.map(function(e){if(t.contains(e))return e;var s=z(e);return s&&t.contains(s)?s:(console.error("aria-hidden",e,"in not contained inside",t,". Doing nothing"),null)}).filter(function(e){return!!e})},Ae=function(t,o,e,s){var a=Be(o,Array.isArray(t)?t:[t]);M[e]||(M[e]=new WeakMap);var f=M[e],p=[],c=new Set,i=new Set(a),l=function(n){!n||c.has(n)||(c.add(n),l(n.parentNode))};a.forEach(l);var r=function(n){!n||i.has(n)||Array.prototype.forEach.call(n.children,function(d){if(c.has(d))r(d);else try{var m=d.getAttribute(s),y=m!==null&&m!=="false",g=($.get(d)||0)+1,O=(f.get(d)||0)+1;$.set(d,g),f.set(d,O),p.push(d),g===1&&y&&S.set(d,!0),O===1&&d.setAttribute(e,"true"),y||d.setAttribute(s,"true")}catch(A){console.error("aria-hidden: cannot operate on ",d,A)}})};return r(o),c.clear(),T++,function(){p.forEach(function(n){var d=$.get(n)-1,m=f.get(n)-1;$.set(n,d),f.set(n,m),d||(S.has(n)||n.removeAttribute(s),S.delete(n)),m||n.removeAttribute(e)}),T--,T||($=new WeakMap,$=new WeakMap,S=new WeakMap,M={})}},Fe=function(t,o,e){e===void 0&&(e="data-aria-hidden");var s=Array.from(Array.isArray(t)?t:[t]),a=De(t);return a?(s.push.apply(s,Array.from(a.querySelectorAll("[aria-live]"))),Ae(s,a,e,"aria-hidden")):function(){return null}};function $e(t){let o;X(()=>ie(t),e=>{e?o=Fe(e):o&&o()}),le(()=>{o&&o()})}const ke=w({__name:"DialogContentModal",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:o}){const e=t,s=o,a=B(),f=L(s),{forwardRef:p,currentElement:c}=C();return $e(c),(i,l)=>(b(),h(q,D({...e,...u(f)},{ref:u(p),"trap-focus":u(a).open.value,"disable-outside-pointer-events":!0,onCloseAutoFocus:l[0]||(l[0]=r=>{var n;r.defaultPrevented||(r.preventDefault(),(n=u(a).triggerElement.value)==null||n.focus())}),onPointerDownOutside:l[1]||(l[1]=r=>{const n=r.detail.originalEvent,d=n.button===0&&n.ctrlKey===!0;(n.button===2||d)&&r.preventDefault()}),onFocusOutside:l[2]||(l[2]=r=>{r.preventDefault()})}),{default:v(()=>[E(i.$slots,"default")]),_:3},16,["trap-focus"]))}}),Pe=w({__name:"DialogContentNonModal",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:o}){const e=t,a=L(o);C();const f=B(),p=_(!1),c=_(!1);return(i,l)=>(b(),h(q,D({...e,...u(a)},{"trap-focus":!1,"disable-outside-pointer-events":!1,onCloseAutoFocus:l[0]||(l[0]=r=>{var n;r.defaultPrevented||(p.value||(n=u(f).triggerElement.value)==null||n.focus(),r.preventDefault()),p.value=!1,c.value=!1}),onInteractOutside:l[1]||(l[1]=r=>{var m;r.defaultPrevented||(p.value=!0,r.detail.originalEvent.type==="pointerdown"&&(c.value=!0));const n=r.target;((m=u(f).triggerElement.value)==null?void 0:m.contains(n))&&r.preventDefault(),r.detail.originalEvent.type==="focusin"&&c.value&&r.preventDefault()})}),{default:v(()=>[E(i.$slots,"default")]),_:3},16))}}),We=w({__name:"DialogContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:o}){const e=t,s=o,a=B(),f=L(s),{forwardRef:p}=C();return(c,i)=>(b(),h(u(G),{present:c.forceMount||u(a).open.value},{default:v(()=>[u(a).modal.value?(b(),h(ke,D({key:0,ref:u(p)},{...e,...u(f),...c.$attrs}),{default:v(()=>[E(c.$slots,"default")]),_:3},16)):(b(),h(Pe,D({key:1,ref:u(p)},{...e,...u(f),...c.$attrs}),{default:v(()=>[E(c.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),Se=de(()=>{const t=_(new Map),o=_(),e=Q(()=>{for(const p of t.value.values())if(p)return!0;return!1}),s=fe({scrollBody:_(!0)});let a=null;const f=()=>{document.body.style.paddingRight="",document.body.style.marginRight="",document.body.style.pointerEvents="",document.body.style.removeProperty("--scrollbar-width"),document.body.style.overflow=o.value??"",U&&(a==null||a()),o.value=void 0};return X(e,(p,c)=>{var n;if(!Y)return;if(!p){c&&f();return}o.value===void 0&&(o.value=document.body.style.overflow);const i=window.innerWidth-document.documentElement.clientWidth,l={padding:i,margin:0},r=(n=s.scrollBody)!=null&&n.value?typeof s.scrollBody.value=="object"?pe({padding:s.scrollBody.value.padding===!0?i:s.scrollBody.value.padding,margin:s.scrollBody.value.margin===!0?i:s.scrollBody.value.margin},l):l:{padding:0,margin:0};i>0&&(document.body.style.paddingRight=typeof r.padding=="number"?`${r.padding}px`:String(r.padding),document.body.style.marginRight=typeof r.margin=="number"?`${r.margin}px`:String(r.margin),document.body.style.setProperty("--scrollbar-width",`${i}px`),document.body.style.overflow="hidden"),U&&(a=me(document,"touchmove",d=>Ie(d),{passive:!1})),H(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})},{immediate:!0,flush:"sync"}),t});function Me(t){const o=Math.random().toString(36).substring(2,7),e=Se();e.value.set(o,t);const s=Q({get:()=>e.value.get(o)??!1,set:a=>e.value.set(o,a)});return ce(()=>{e.value.delete(o)}),s}function Z(t){const o=window.getComputedStyle(t);if(o.overflowX==="scroll"||o.overflowY==="scroll"||o.overflowX==="auto"&&t.clientWidth<t.scrollWidth||o.overflowY==="auto"&&t.clientHeight<t.scrollHeight)return!0;{const e=t.parentNode;return!(e instanceof Element)||e.tagName==="BODY"?!1:Z(e)}}function Ie(t){const o=t||window.event,e=o.target;return e instanceof Element&&Z(e)?!1:o.touches.length>1?!0:(o.preventDefault&&o.cancelable&&o.preventDefault(),!1)}const Re=w({__name:"DialogOverlayImpl",props:{asChild:{type:Boolean},as:{}},setup(t){const o=B();return Me(!0),C(),(e,s)=>(b(),h(u(P),{as:e.as,"as-child":e.asChild,"data-state":u(o).open.value?"open":"closed",style:{"pointer-events":"auto"}},{default:v(()=>[E(e.$slots,"default")]),_:3},8,["as","as-child","data-state"]))}}),Ue=w({__name:"DialogOverlay",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{}},setup(t){const o=B(),{forwardRef:e}=C();return(s,a)=>{var f;return(f=u(o))!=null&&f.modal.value?(b(),h(u(G),{key:0,present:s.forceMount||u(o).open.value},{default:v(()=>[j(Re,D(s.$attrs,{ref:u(e),as:s.as,"as-child":s.asChild}),{default:v(()=>[E(s.$slots,"default")]),_:3},16,["as","as-child"])]),_:3},8,["present"])):ve("",!0)}}}),Ve=w({__name:"DialogTitle",props:{asChild:{type:Boolean},as:{default:"h2"}},setup(t){const o=t,e=B();return C(),(s,a)=>(b(),h(u(P),D(o,{id:u(e).titleId}),{default:v(()=>[E(s.$slots,"default")]),_:3},16,["id"]))}}),xe=w({__name:"DialogDescription",props:{asChild:{type:Boolean},as:{default:"p"}},setup(t){const o=t;C();const e=B();return(s,a)=>(b(),h(u(P),D(o,{id:u(e).descriptionId}),{default:v(()=>[E(s.$slots,"default")]),_:3},16,["id"]))}}),Ye=w({__name:"DialogPortal",props:{to:{},disabled:{type:Boolean},defer:{type:Boolean},forceMount:{type:Boolean}},setup(t){const o=t;return(e,s)=>(b(),h(u(he),ye(ge(o)),{default:v(()=>[E(e.$slots,"default")]),_:3},16))}});export{Ue as _,We as a,Le as b,Ne as c,Ye as d,Ve as e,xe as f,B as i};
